# Hello-Scan-Code - é«˜æ•ˆä»£ç æœç´¢å·¥å…· (æ–°æ¶æ„ç‰ˆæœ¬)

Hello-Scan-Code æ˜¯ä¸€ä¸ªä¸“ä¸ºå¤§å‹ä»£ç ä»“åº“è®¾è®¡çš„é«˜æ•ˆæœç´¢å·¥å…·ã€‚ç»è¿‡å…¨é¢é‡æ„ï¼Œç°é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œæ”¯æŒJSONé…ç½®æ–‡ä»¶å’ŒPyInstalleræ‰“åŒ…ï¼Œæä¾›æ›´å¥½çš„æ‰©å±•æ€§å’Œæ˜“ç”¨æ€§ã€‚

## âœ¨ æ–°æ¶æ„ç‰¹æ€§

### PyInstaller æ‰“åŒ…æ”¯æŒ
- **è·¨å¹³å°æ‰“åŒ…**ï¼šæ”¯æŒ Windows å’Œ Linux å¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶ç”Ÿæˆ
- **æ— ä¾èµ–è¿è¡Œ**ï¼šç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶åŒ…å«æ‰€æœ‰å¿…è¦ä¾èµ–ï¼Œå¯åœ¨ç›®æ ‡ç³»ç»Ÿç›´æ¥è¿è¡Œ
- **è‡ªåŠ¨åŒ–æ„å»º**ï¼šæä¾›æ„å»ºè„šæœ¬å®ç°ä¸€é”®æ‰“åŒ…

### JSON é…ç½®ç³»ç»Ÿ
- **é…ç½®å¤–ç½®åŒ–**ï¼šæ”¯æŒé€šè¿‡ `config.json` æ–‡ä»¶ç®¡ç†æ‰€æœ‰é…ç½®
- **Schema éªŒè¯**ï¼šæä¾› JSON Schema éªŒè¯ç¡®ä¿é…ç½®æ­£ç¡®æ€§
- **å‘åå…¼å®¹**ï¼šä¿æŒä¸ç°æœ‰é…ç½®ç³»ç»Ÿçš„å…¼å®¹æ€§

> ğŸ“ **è¯¦ç»†æ‰“åŒ…å’Œé…ç½®æŒ‡å—è¯·å‚è€ƒ**: [PYINSTALLER_GUIDE.md](PYINSTALLER_GUIDE.md)

### ğŸ—ï¸ æ¨¡å—åŒ–æ¶æ„é‡æ„
- **ç»Ÿä¸€é…ç½®ç®¡ç†å™¨**ï¼š`ConfigManager` é›†ä¸­ç®¡ç†æ‰€æœ‰é…ç½®æ¨¡å—
- **åˆ†å±‚é…ç½®ç³»ç»Ÿ**ï¼šåº”ç”¨é…ç½®ã€æ—¥å¿—é…ç½®ã€æ•°æ®åº“é…ç½®ç‹¬ç«‹ç®¡ç†
- **æ™ºèƒ½é…ç½®åŠ è½½**ï¼šæ”¯æŒJSONé…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡çš„å¤šå±‚çº§é…ç½®
- **è‡ªåŠ¨é…ç½®éªŒè¯**ï¼šå†…ç½®é…ç½®éªŒè¯å’Œé”™è¯¯å¤„ç†æœºåˆ¶
- **å®Œå…¨å‘åå…¼å®¹**ï¼šä¿æŒä¸åŸæœ‰APIçš„å®Œå…¨å…¼å®¹æ€§

### ğŸ“„ JSONé…ç½®ç³»ç»Ÿ
- **å¤–ç½®é…ç½®æ–‡ä»¶**ï¼šæ”¯æŒ `config.json` é…ç½®æ–‡ä»¶ï¼Œå®ç°é…ç½®ä¸ä»£ç åˆ†ç¦»
- **é…ç½®ä¼˜å…ˆçº§**ï¼šJSONé…ç½® > ç¯å¢ƒå˜é‡ > é»˜è®¤é…ç½®
- **å®æ—¶é…ç½®éªŒè¯**ï¼šè‡ªåŠ¨éªŒè¯é…ç½®æ–‡ä»¶æ ¼å¼å’Œæ•°æ®æœ‰æ•ˆæ€§
- **é…ç½®æ¨¡æ¿ç®¡ç†**ï¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®æ¨¡æ¿æ–‡ä»¶
- **é”™è¯¯æ¢å¤æœºåˆ¶**ï¼šé…ç½®é”™è¯¯æ—¶è‡ªåŠ¨å›é€€åˆ°é»˜è®¤é…ç½®

### ğŸš€ å¢å¼ºçš„PyInstalleræ‰“åŒ…æ”¯æŒ
- **æ™ºèƒ½èµ„æºæ”¶é›†**ï¼šè‡ªåŠ¨è¯†åˆ«å’Œæ‰“åŒ…æ‰€æœ‰å¿…è¦èµ„æºæ–‡ä»¶
- **è·¨å¹³å°æ„å»º**ï¼šæ”¯æŒWindowså•æ–‡ä»¶å’ŒLinuxç›®å½•æ¨¡å¼æ‰“åŒ…
- **æ¨¡å—åŒ–é’©å­ç³»ç»Ÿ**ï¼šä¸ºæ–°æ¶æ„ä¼˜åŒ–çš„PyInstalleré’©å­
- **è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·**ï¼šå®Œæ•´çš„æ„å»ºè„šæœ¬å’ŒMakefileæ”¯æŒ
- **é›¶ä¾èµ–éƒ¨ç½²**ï¼šæ‰“åŒ…åç¨‹åºåŒ…å«æ‰€æœ‰å¿…è¦ä¾èµ–

## ğŸ“¦ å®‰è£…æ–¹å¼

### æ–¹å¼ä¸€ï¼šä¸‹è½½å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ¨èï¼‰

ä» [Releases](https://github.com/taoweidong/Hello-Scan-Code/releases) é¡µé¢ä¸‹è½½å¯¹åº”å¹³å°çš„é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼š

- `hello-scan-code-v1.0.0-windows.zip` - Windows å¹³å°
- `hello-scan-code-v1.0.0-linux.tar.gz` - Linux å¹³å°

### æ–¹å¼äºŒï¼šä»æºç å®‰è£…ï¼ˆå¼€å‘è€…ï¼‰

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/taoweidong/Hello-Scan-Code.git
cd Hello-Scan-Code

# å®‰è£…ä¾èµ–
pip install pyinstaller loguru pandas openpyxl sqlalchemy alembic

# æˆ–ä½¿ç”¨Makefile
make install
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨å¯æ‰§è¡Œæ–‡ä»¶

#### Windows
```bash
# è§£å‹ä¸‹è½½çš„æ–‡ä»¶
unzip hello-scan-code-v1.0.0-windows.zip
cd hello-scan-code-v1.0.0-windows

# åˆ›å»ºé…ç½®æ–‡ä»¶
copy config.template.json config.json

# ç¼–è¾‘é…ç½®æ–‡ä»¶
notepad config.json

# è¿è¡Œç¨‹åº
hello-scan-code.exe
```

#### Linux
```bash
# è§£å‹ä¸‹è½½çš„æ–‡ä»¶
tar -xzf hello-scan-code-v1.0.0-linux.tar.gz
cd hello-scan-code-v1.0.0-linux

# ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
./run-hello-scan-code.sh

# æˆ–ç›´æ¥è¿è¡Œ
./hello-scan-code/hello-scan-code
```

### ä»æºç è¿è¡Œ

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
cp config/config.template.json config.json

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim config.json

# è¿è¡Œç¨‹åº
python main.py

# æˆ–ä½¿ç”¨Makefile
make run
```

## ğŸ“‹ æ–°æ¶æ„JSONé…ç½®ç³»ç»Ÿ

### é…ç½®æ–‡ä»¶ç¤ºä¾‹

```json
{
  "repo_path": ".",
  "search_term": "TODO,FIXME,BUG",
  "is_regex": false,
  "validate": true,
  "validate_workers": 4,
  
  "output": {
    "db_path": "db/results.db",
    "excel_path": "report/results.xlsx"
  },
  
  "logging": {
    "level": "INFO",
    "file_path": "logs/app.log",
    "rotation": "10 MB",
    "retention": "7 days"
  },
  
  "database": {
    "pool_size": 5,
    "max_overflow": 10,
    "pool_timeout": 30
  },
  
  "filters": {
    "ignore_dirs": [
      ".git", "__pycache__", "node_modules",
      "dist", "build", ".vscode", ".idea"
    ],
    "file_extensions": [".py", ".js", ".java"]
  }
}
```

## ğŸ”§ å¼€å‘è€…æŒ‡å—

### æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶

```bash
# ä½¿ç”¨Makefileæ„å»º
make build-linux    # Linuxå¹³å°
make build-windows  # Windowså¹³å°
make all           # å®Œæ•´æ„å»ºæµç¨‹

# æˆ–æ‰‹åŠ¨æ‰§è¡Œæ„å»ºè„šæœ¬
python scripts/build_linux.py
python scripts/build_windows.py
```

### æµ‹è¯•æ–°æ¶æ„

```bash
# æµ‹è¯•æ–°æ¶æ„é›†æˆ
make test-new-arch

# æµ‹è¯•é…ç½®ç³»ç»Ÿ
make test-config

# æµ‹è¯•æ‰“åŒ…åŠŸèƒ½
make test-packaging

# æˆ–ç›´æ¥è¿è¡Œ
python test_new_architecture.py
```

## ğŸ“Š æ–°æ¶æ„ä¼˜åŠ¿

| ç‰¹æ€§ | åŸæ¶æ„ | æ–°æ¶æ„ | æ”¹è¿› |
|------|--------|--------|------|
| é…ç½®ç®¡ç† | å•ä¸€é…ç½®æ–‡ä»¶ | æ¨¡å—åŒ– + JSON | âœ“ æ›´çµæ´» |
| é”™è¯¯å¤„ç† | åŸºç¡€éªŒè¯ | å¤šå±‚éªŒè¯ | âœ“ æ›´å¥å£® |
| æ‰©å±•æ€§ | æœ‰é™ | é«˜åº¦æ¨¡å—åŒ– | âœ“ æ˜“æ‰©å±• |
| æ‰“åŒ…æ•ˆç‡ | æ‰‹åŠ¨é…ç½® | æ™ºèƒ½æ”¶é›† | âœ“ æ›´è‡ªåŠ¨åŒ– |
| é…ç½®éªŒè¯ | ç¼ºå°‘ | å®Œæ•´éªŒè¯ | âœ“ æ›´å®‰å…¨ |
| å‘åå…¼å®¹ | N/A | å®Œå…¨å…¼å®¹ | âœ“ æ— ç¼å‡çº§ |

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (æ–°æ¶æ„ç‰ˆæœ¬)
- ğŸ—ï¸ å…¨æ–°æ¨¡å—åŒ–æ¶æ„é‡æ„
- ğŸ“„ ç»Ÿä¸€é…ç½®ç®¡ç†ç³»ç»Ÿ
- ğŸ“‹ JSONé…ç½®æ–‡ä»¶æ”¯æŒ
- ğŸš€ å¢å¼ºçš„PyInstalleræ‰“åŒ…æ”¯æŒ
- ğŸ”§ è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•å·¥å…·
- ğŸ“š å®Œæ•´çš„æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
- ğŸ”„ å®Œå…¨å‘åå…¼å®¹

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [PyInstalleræ‰“åŒ…ä½¿ç”¨æŒ‡å—](PYINSTALLER_GUIDE.md) - è¯¦ç»†çš„æ‰“åŒ…å’Œéƒ¨ç½²æŒ‡å—
- [DATABASE_OPTIMIZATION_SUMMARY.md](DATABASE_OPTIMIZATION_SUMMARY.md) - æ•°æ®åº“ä¼˜åŒ–æ€»ç»“
- [docs/](docs/) - å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£

## é¡¹ç›®ç»“æ„

```bash
hello-scan-code/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py           # é…ç½®æ–‡ä»¶è§£æ
â”‚   â”œâ”€â”€ logger_config.py    # æ—¥å¿—é…ç½®
â”‚   â”œâ”€â”€ strategies.py       # æœç´¢ç­–ç•¥æ¥å£å’Œå®ç°ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰
â”‚   â”œâ”€â”€ search_factory.py   # æœç´¢ç­–ç•¥å·¥å‚ï¼ˆå·¥å‚æ¨¡å¼ï¼‰
â”‚   â”œâ”€â”€ search_template.py  # æœç´¢æ¨¡æ¿æ–¹æ³•ï¼ˆæ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼‰
â”‚   â”œâ”€â”€ validators.py       # ç»“æœéªŒè¯å™¨ï¼ˆè£…é¥°å™¨æ¨¡å¼ï¼‰
â”‚   â”œâ”€â”€ searcher.py         # æœç´¢å¼•æ“å®ç°
â”‚   â”œâ”€â”€ database.py         # æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ exporter.py         # Excel å¯¼å‡ºé€»è¾‘
â”‚   â”œâ”€â”€ code_searcher.py    # æ ¸å¿ƒæœç´¢å™¨ç±»
â”‚   â””â”€â”€ main.py             # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ pyproject.toml          # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ README.md               # ä½¿ç”¨è¯´æ˜
â””â”€â”€ main.py                 # æ ¹ç›®å½•å…¥å£æ–‡ä»¶
```

## é¡¹ç›®åˆå§‹åŒ–

1. **å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/taoweidong/Hello-Scan-Code.git
cd Hello-Scan-Code
```

1. **å®‰è£…ä¾èµ–**

```bash
# ä½¿ç”¨ uvï¼ˆæ¨èï¼‰
uv sync

# æˆ–ä½¿ç”¨ pip
pip install loguru pandas openpyxl
```

1. **åˆ›å»ºè¾“å‡ºç›®å½•**

```bash
mkdir -p db report logs
```

## æœ¬åœ°è¿è¡Œ

1. **é…ç½®æœç´¢å‚æ•°**

åœ¨ `src/main.py` ä¸­ä¿®æ”¹é…ç½®ï¼š

```python
config.repo_path = "/path/to/your/code/repository"  # ä»£ç ä»“åº“è·¯å¾„
config.search_term = "keyword1,keyword2,keyword3"   # æœç´¢å…³é”®å­—
config.ignore_dirs = [".git", "node_modules"]       # å¿½ç•¥ç›®å½•
config.file_extensions = [".py", ".js", ".go"]      # æ–‡ä»¶ç±»å‹
```

1. **è¿è¡Œæœç´¢**

   ```bash
   python main.py
   ```

1. **æŸ¥çœ‹ç»“æœ**
   - SQLite æ•°æ®åº“ï¼š`db/results.db`
   - Excel æ–‡ä»¶ï¼š`report/results.xlsx`
   - æ—¥å¿—æ–‡ä»¶ï¼š`logs/` ç›®å½•

## é…ç½®å‚æ•°

ä¸»è¦é…ç½®å‚æ•°è¯´æ˜ï¼š

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `repo_path` | ä»£ç ä»“åº“è·¯å¾„ | `/root/CodeRootPath` |
| `search_term` | æœç´¢å…³é”®å­—ï¼ˆé€—å·åˆ†éš”ï¼‰ | `test,def,void` |
| `is_regex` | æ˜¯å¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ | `False` |
| `ignore_dirs` | å¿½ç•¥çš„ç›®å½•åˆ—è¡¨ | `[".git", "__pycache__", "node_modules"]` |
| `file_extensions` | æ–‡ä»¶åç¼€è¿‡æ»¤ | `None`ï¼ˆä¸é™åˆ¶ï¼‰ |
| `db_path` | SQLite è¾“å‡ºè·¯å¾„ | `db/results.db` |
| `excel_path` | Excel è¾“å‡ºè·¯å¾„ | `report/results.xlsx` |

## æŠ€æœ¯ç‰¹ç‚¹

- **é¢å‘å¯¹è±¡è®¾è®¡**ï¼šé‡‡ç”¨ç­–ç•¥æ¨¡å¼ã€å·¥å‚æ¨¡å¼ç­‰è®¾è®¡æ¨¡å¼
- **é«˜æ•ˆæœç´¢**ï¼šä¼˜å…ˆä½¿ç”¨ `grep`ï¼Œè‡ªåŠ¨é™çº§åˆ° Python å®ç°
- **æ™ºèƒ½ç¼–ç **ï¼šè‡ªåŠ¨å¤„ç†å¤šç§æ–‡ä»¶ç¼–ç æ ¼å¼
- **ç»“æœå¯¼å‡º**ï¼šæ”¯æŒ SQLite å’Œ Excel åŒé‡è¾“å‡º